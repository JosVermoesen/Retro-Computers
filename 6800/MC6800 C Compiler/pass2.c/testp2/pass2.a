 name pass2.c
 text
 data
 global _fout
_fout fdb 1
 bss
 global __obuf
__obuf rmb 512
 data
 global __opos
__opos fdb __obuf
 text
 global _flush
_flush pshs u,y
 leay 2,s
 leas -L2,s
* Auto -4 n
* Begin expression - 38
 ldd #__obuf
 std 0,s
 ldd __opos
 subd 0,s
 std -4,y
* Begin expression - 39
 ldx #__obuf
 stx __opos
* Begin expression - 40
 cmpd #0
 lble L3
* Begin expression - 41
 std 0,s
 ldx #__obuf
 pshs x
 ldd _fout
 pshs d
 jsr _write
 leas 4,s
 cmpd -4,y
 lbeq L4
* Begin expression - 42
 ldd #-1
 lbra L1
L4
L3
* Begin expression - 43
 ldd #0
L1
L2 equ 4
 leas -2,y
 puls y,u,pc
 global __flsbuf
__flsbuf pshs u,y
 leay 2,s
 leas -L6,s
* Auto 4 c
* Begin expression - 47
 jsr _flush
 cmpd #-1
 lbne L7
* Begin expression - 48
 ldd #-1
 lbra L5
L7
* Begin expression - 49
 ldd 4,y
 ldx __opos
 stb 0,x+
 stx __opos
* Begin expression - 50
 ldd 4,y
L5
L6 equ 2
 leas -2,y
 puls y,u,pc
 global __cleanu
__cleanu pshs u,y
 leay 2,s
 leas -L9,s
* Begin expression - 55
 jsr _flush
L8
L9 equ 2
 leas -2,y
 puls y,u,pc
 global _putchar
_putchar pshs u,y
 leay 2,s
 leas -L11,s
* Auto 4 c
* Begin expression - 61
 ldx #__obuf+512
 cmpx __opos
 ble 10f
 ldd 4,y
 ldx __opos
 stb 0,x+
 stx __opos
 sex
 clra
 bra 11f
10
 ldd 4,y
 std 0,s
 jsr __flsbuf
11
L10
L11 equ 2
 leas -2,y
 puls y,u,pc
 bss
 global _fd
_fd rmb 2
 global _eofflg
_eofflg rmb 2
 global _nxtlab
_nxtlab rmb 2
 global _revcon
_revcon rmb 2
 global _extra
_extra rmb 1
 global _extflg
_extflg rmb 1
 global _flabtyp
_flabtyp rmb 1
 global _sawcnd
_sawcnd rmb 1
 global _opalong
_opalong rmb 1
 global _bufptr
_bufptr rmb 2
 global _bufend
_bufend rmb 2
 global _stklev
_stklev rmb 2
 global _stksiz
_stksiz rmb 2
 global _condit
_condit rmb 2
 global _flabnum
_flabnum rmb 2
 global _ccok
_ccok rmb 1
 global _brntyp
_brntyp rmb 1
 global _unscom
_unscom rmb 1
 global _dvalid
_dvalid rmb 1
 global _reguse
_reguse rmb 2
 global _lstlev
_lstlev rmb 2
 global _explev
_explev rmb 2
 global _locop1
_locop1 rmb 2
 global _locop2
_locop2 rmb 2
 global _incloc
_incloc rmb 2
 global _localv
_localv rmb 2
 global _orp
_orp rmb 2
 global _andp
_andp rmb 2
 global _cndp
_cndp rmb 2
 global _andstk
_andstk rmb 64
 global _orstk
_orstk rmb 64
 global _cndstk
_cndstk rmb 64
 global _curopr
_curopr rmb 2
 global _curtyp
_curtyp rmb 2
 global _dcont
_dcont rmb 2
 global _xcont
_xcont rmb 2
 global _dloc
_dloc rmb 10
 global _ibuf
_ibuf rmb 513
 global _namebuf
_namebuf rmb 10
 global _exptbl
_exptbl rmb 4488
 global _adregs
_adregs rmb 704
 global _retlab
_retlab rmb 2
 global _lretlab
_lretlab rmb 2
 global _notdone
_notdone rmb 1
 data
 global _bar1
_bar1 fdb L12,L13,L14,L15,L16,L17
 global _bar2
_bar2 fdb L18,L19,L20,L21,L22,L23
 global _bar3
_bar3 fdb L24,L25,L26,L27,L28,L29
 global _bar4
_bar4 fdb L30,L31,L32,L33,L34,L35
 text
 global _main
_main pshs u,y
 leay 2,s
 leas -L37,s
* Begin expression - 74
 jsr _initial
* Begin expression - 75
 jsr _loop
* Begin expression - 76
 jsr _flush
L36
L37 equ 2
 leas -2,y
 puls y,u,pc
 global _initial
_initial pshs u,y
 leay 2,s
 leas -L39,s
* Begin expression - 83
 ldd #3
 std _fd
* Begin expression - 84
 ldd #0
 std _eofflg
* Begin expression - 85
 ldx #_ibuf+513
 stx _bufptr
* Begin expression - 86
 ldx _bufptr
 stx _bufend
* Begin expression - 87
 clr _extra
* Begin expression - 88
 clr _extflg
* Begin expression - 89
 ldd #4
 std _fout
* Begin expression - 90
 ldd #10000
 std _nxtlab
L38
L39 equ 2
 leas -2,y
 puls y,u,pc
 global _nextc
_nextc pshs u,y
 leay 2,s
 leas -L41,s
* Auto -4 count
* Begin expression - 98
 ldx _bufptr
 cmpx _bufend
 lbne L42
* Begin expression - 99
 ldd #512
 std 0,s
 ldx #_ibuf+1
 pshs x
 ldd _fd
 pshs d
 jsr _read
 leas 4,s
 std -4,y
 lbge L43
* Begin expression - 100
 ldx #L44
 stx 0,s
 jsr _perror
* Begin expression - 101
 ldd #255
 std 0,s
 jsr _exit
L43
* Begin expression - 103
 ldd -4,y
 ldx #_ibuf+1
 leax d,x
 stx _bufend
* Begin expression - 104
 ldx #_ibuf+1
 stx _bufptr
* Begin expression - 105
 cmpd #0
 lbne L45
* Begin expression - 106
 ldd #-1
 lbra L40
L45
L42
* Begin expression - 108
 ldx _bufptr
 ldb 0,x+
 stx _bufptr
 sex
 clra
L40
L41 equ 4
 leas -2,y
 puls y,u,pc
 global _nextw
_nextw pshs u,y
 leay 2,s
 leas -L47,s
* Auto -4 char1
* Auto -6 char2
* Begin expression - 116
 jsr _nextc
 std -4,y
 cmpd #-1
 lbne L48
* Begin expression - 117
 jsr _badfile
L48
* Begin expression - 118
 jsr _nextc
 std -6,y
 cmpd #-1
 lbne L49
* Begin expression - 119
 jsr _badfile
L49
* Begin expression - 120
 ldd -4,y
 tfr b,a
 clrb
 ora -6,y
 orb -5,y
L46
L47 equ 6
 leas -2,y
 puls y,u,pc
 global _nexts
_nexts pshs u,y
 leay 2,s
 leas -L51,s
* Auto 4 string
* Auto -3 chr
* Register 128 pointer
* Begin expression - 131
 ldu 4,y
L52
* Begin expression - 132
 jsr _nextc
 stb -3,y
 lbeq L53
* Begin expression - 133
 cmpb #255
 lbne L54
* Begin expression - 134
 jsr _badfile
L54
* Begin expression - 135
 ldb -3,y
 stb 0,u+
 lbra L52
L53
* Begin expression - 137
 clr 0,u
* Begin expression - 138
 ldx 4,y
L50
L51 equ 3
 tfr x,d
 leas -2,y
 puls y,u,pc
 global _rtrnc
_rtrnc pshs u,y
 leay 2,s
 leas -L56,s
* Auto 4 ch
* Begin expression - 146
 ldd 4,y
 ldx _bufptr
 stb 0,-x
 stx _bufptr
L55
L56 equ 2
 leas -2,y
 puls y,u,pc
 global _expb
_expb pshs u,y
 leay 2,s
 leas -L58,s
* Auto -4 tok
* Begin expression - 154
 jsr _nextc
 std -4,y
 cmpd #-1
 lbne L59
* Begin expression - 155
 jsr _badfile
L59
* Begin expression - 156
 ldd -4,y
L57
L58 equ 4
 leas -2,y
 puls y,u,pc
 global _expw
_expw pshs u,y
 leay 2,s
 leas -L61,s
* Begin expression - 162
 jsr _nextw
L60
L61 equ 2
 leas -2,y
 puls y,u,pc
 global _badfile
_badfile pshs u,y
 leay 2,s
 leas -L63,s
* Begin expression - 169
 ldx #L64
 stx 0,s
 jsr _perror
* Begin expression - 170
 jsr _abort
L62
L63 equ 2
 leas -2,y
 puls y,u,pc
 global _perror
_perror pshs u,y
 leay 2,s
 leas -L66,s
* Auto 4 msg
* Begin expression - 178
 ldx 4,y
 stx 0,s
 ldd #2
 pshs d
 jsr _outcode
 leas 2,s
L65
L66 equ 2
 leas -2,y
 puls y,u,pc
 global _outcode
_outcode pshs u,y
 leay 2,s
 leas -L68,s
* Auto 4 args
* Register 128 ap
* Auto -4 c
* Auto -6 s
* Auto -8 af
* Auto -10 p
* Auto -12 f
* Auto -14 sfout
* Begin expression - 189
 leau 4,y
* Begin expression - 190
 ldd 0,u
 std -12,y
* Begin expression - 191
 ldd #-1
 std -14,y
* Begin expression - 192
 ldd -12,y
 cmpd #20
 lbhs L69
* Begin expression - 193
 leau 2,u
* Begin expression - 194
 cmpd _fout
 lbeq L70
* Begin expression - 195
 jsr _flush
* Begin expression - 196
 ldd _fout
 std -14,y
* Begin expression - 197
 ldd -12,y
 std _fout
L70
L69
* Begin expression - 200
 leau 2,u
 ldx -2,u
 stx -8,y
L71
L74
* Begin expression - 202
 ldx -8,y
 ldb 0,x+
 stx -8,y
 sex
 std -4,y
 cmpd #37
 lbeq L75
* Begin expression - 203
 cmpd #0
 lbeq L75
L76
* Begin expression - 205
 ldx #__obuf+512
 cmpx __opos
 ble 10f
 ldd -4,y
 ldx __opos
 stb 0,x+
 stx __opos
 sex
 clra
 lbra L74
10
 ldd -4,y
 std 0,s
 jsr __flsbuf
11
 lbra L74
L75
* Begin expression - 207
 ldd -4,y
 lbeq L72
L77
* Begin expression - 209
 ldx -8,y
 ldb 0,x+
 stx -8,y
 sex
 std -4,y
* Begin expression - 210
 ldd #0
 std -10,y
* Begin expression - 211
 ldd #0
 std -12,y
* Begin expression - 212
 ldd -4,y
 cmpd #45
 lbne L78
* Begin expression - 213
 ldd -12,y
 orb #$4
 std -12,y
* Begin expression - 214
 ldx -8,y
 ldb 0,x+
 stx -8,y
 sex
 std -4,y
L78
* Begin expression - 216
 ldd -4,y
 cmpd #48
 lbne L79
* Begin expression - 217
 ldd -12,y
 orb #$1
 std -12,y
* Begin expression - 218
 ldx -8,y
 ldb 0,x+
 stx -8,y
 sex
 std -4,y
L79
L80
* Begin expression - 220
 ldd -4,y
 cmpd #48
 lblt L81
 cmpd #57
10
 lbgt L81
* Begin expression - 221
 ldd -10,y
 std 0,s
 ldd #10
 jsr imul
 addd -4,y
 addd #-48
 std -10,y
* Begin expression - 222
 ldx -8,y
 ldb 0,x+
 stx -8,y
 sex
 std -4,y
 lbra L80
L81
* Begin expression - 224
 ldd -4,y
 cmpd #46
 lbne L82
* Begin expression - 225
 ldx -8,y
 ldb 0,x+
 stx -8,y
 sex
 std -4,y
L83
* Begin expression - 226
 ldd -4,y
 cmpd #48
 lblt L84
 cmpd #57
10
 lbgt L84
* Begin expression - 227
 ldx -8,y
 ldb 0,x+
 stx -8,y
 sex
 std -4,y
 lbra L83
L84
L82
* Begin expression - 229
 ldd -4,y
 lbeq L72
L85
* Begin expression - 231
 ldd -4,y
 lbra L87
L88
* Begin expression - 233
 ldd -12,y
 orb #$2
 std -12,y
L89
L90
* Begin expression - 236
 ldd #10
 std -4,y
 lbra L91
L92
* Begin expression - 239
 ldd #8
 std -4,y
 lbra L91
L93
* Begin expression - 242
 ldd #2
 std -4,y
 lbra L91
L94
L95
* Begin expression - 246
 ldd #16
 std -4,y
L91
* Begin expression - 247
 ldd -12,y
 std 0,s
 ldd -10,y
 pshs d
 ldd -4,y
 pshs d
 ldd 0,u++
 pshs d
 jsr __num
 leas 6,s
 lbra L73
L96
* Begin expression - 250
 ldd 0,u++
 clra
 andb #$7F
 std -4,y
* Begin expression - 251
 ldx #__obuf+512
 cmpx __opos
 ble 10f
 ldd -4,y
 ldx __opos
 stb 0,x+
 stx __opos
 sex
 clra
 bra 11f
10
 ldd -4,y
 std 0,s
 jsr __flsbuf
11
* Begin expression - 252
 ldd -10,y
 subd #1
 std -10,y
L97
* Begin expression - 253
 ldd -10,y
 subd #1
 std -10,y
 lblt L98
* Begin expression - 254
 ldx #__obuf+512
 cmpx __opos
 ble 10f
 ldb #32
 ldx __opos
 stb 0,x+
 stx __opos
 sex
 clra
 lbra L97
10
 ldd #32
 std 0,s
 jsr __flsbuf
11
 lbra L97
L98
 lbra L73
L99
* Begin expression - 257
 leau 2,u
 ldx -2,u
 stx -6,y
L100
* Begin expression - 258
 ldb [-6,y]
 lbeq L101
* Begin expression - 259
 ldx -6,y
 ldb 0,x+
 stx -6,y
 sex
 clra
 andb #$7F
 std -4,y
* Begin expression - 260
 ldx #__obuf+512
 cmpx __opos
 ble 10f
 ldd -4,y
 ldx __opos
 stb 0,x+
 stx __opos
 sex
 clra
 bra 11f
10
 ldd -4,y
 std 0,s
 jsr __flsbuf
11
* Begin expression - 261
 ldd -10,y
 lbeq L100
 subd #1
 std -10,y
10
 lble L101
L102
 lbra L100
L101
L103
* Begin expression - 264
 ldd -10,y
 subd #1
 std -10,y
 lblt L104
* Begin expression - 265
 ldx #__obuf+512
 cmpx __opos
 ble 10f
 ldb #32
 ldx __opos
 stb 0,x+
 stx __opos
 sex
 clra
 lbra L103
10
 ldd #32
 std 0,s
 jsr __flsbuf
11
 lbra L103
L104
 lbra L73
L87
 ldx #L10004
 std L10003
L10002 cmpd 0,x++
 bne L10002
 jmp [L10003-L10004,x]
 data
L10004  fdb 100,108,117,111,98,104,120,99,115
L10003 fdb 0
 fdb L88,L89,L90,L92,L93,L94,L95,L96,L99,L10001
 text
L10001
 text
L86
* Begin expression - 268
 ldx #__obuf+512
 cmpx __opos
 ble 10f
 ldd -4,y
 ldx __opos
 stb 0,x+
 stx __opos
 sex
 clra
 lbra L71
10
 ldd -4,y
 std 0,s
 jsr __flsbuf
L73
 lbra L71
L72
* Begin expression - 270
 ldd -14,y
 lblt L105
* Begin expression - 271
 jsr _flush
* Begin expression - 272
 ldd -14,y
 std _fout
L105
L67
L68 equ 14
 leas -2,y
 puls y,u,pc
__num pshs u,y
 leay 2,s
 leas -L107,s
* Auto 4 an
* Auto 6 ab
* Auto 8 ap
* Auto 10 af
* Auto -4 n
* Auto -6 b
* Register 128 p
* Auto -8 neg
* Auto -25 buf
* Begin expression - 282
 leau -8,y
* Begin expression - 283
 ldd 4,y
 std -4,y
* Begin expression - 284
 ldd 6,y
 std -6,y
* Begin expression - 285
 ldd #0
 std -8,y
* Begin expression - 286
 ldd 10,y
 clra
 andb #$2
 lbeq L108
 ldd 4,y
10
 lbge L108
* Begin expression - 287
 inc -7,y
 bne 1f
 inc -8,y
1
* Begin expression - 288
 ldd -4,y
 nega
 negb
 sbca #0
 std -4,y
* Begin expression - 289
 ldd 8,y
 subd #1
 std 8,y
L108
* Begin expression - 291
 clr 0,-u
L109
* Begin expression - 293
 ldd -4,y
 std 0,s
 ldd -6,y
 jsr umod
 ldx #L112
 ldb d,x
 stb 0,-u
* Begin expression - 294
 ldd 8,y
 subd #1
 std 8,y
L110
* Begin expression - 295
 ldd -4,y
 std 0,s
 ldd -6,y
 jsr udiv
 std -4,y
 lbne L109
L111
* Begin expression - 296
 ldd #32
 std -4,y
* Begin expression - 297
 ldd 10,y
 clra
 andb #$5
 cmpd #1
 lbne L113
* Begin expression - 298
 ldd #48
 std -4,y
 lbra L114
L113
* Begin expression - 299
 ldd -8,y
 lbeq L115
* Begin expression - 300
 ldb #45
 stb 0,-u
* Begin expression - 301
 ldd #0
 std -8,y
L115
L114
* Begin expression - 303
 ldd 10,y
 clra
 andb #$4
 lbne L116
L117
* Begin expression - 304
 ldd 8,y
 subd #1
 std 8,y
 lblt L118
* Begin expression - 305
 ldd -4,y
 stb 0,-u
 lbra L117
L118
L116
* Begin expression - 306
 ldd -8,y
 lbeq L119
* Begin expression - 307
 ldb #45
 stb 0,-u
L119
L120
* Begin expression - 308
 ldb 0,u
 lbeq L121
* Begin expression - 309
 ldx #__obuf+512
 cmpx __opos
 ble 10f
 ldb 0,u+
 ldx __opos
 stb 0,x+
 stx __opos
 sex
 clra
 lbra L120
10
 ldb 0,u+
 sex
 std 0,s
 jsr __flsbuf
11
 lbra L120
L121
L122
* Begin expression - 310
 ldd 8,y
 subd #1
 std 8,y
 lblt L123
* Begin expression - 311
 ldx #__obuf+512
 cmpx __opos
 ble 10f
 ldd -4,y
 ldx __opos
 stb 0,x+
 stx __opos
 sex
 clra
 lbra L122
10
 ldd -4,y
 std 0,s
 jsr __flsbuf
11
 lbra L122
L123
L106
L107 equ 25
 leas -2,y
 puls y,u,pc
 data
L12 fcb 98,101,113,0
L13 fcb 98,110,101,0
L14 fcb 98,108,116,0
L15 fcb 98,103,116,0
L16 fcb 98,108,101,0
L17 fcb 98,103,101,0
L18 fcb 98,110,101,0
L19 fcb 98,101,113,0
L20 fcb 98,103,101,0
L21 fcb 98,108,101,0
L22 fcb 98,103,116,0
L23 fcb 98,108,116,0
L24 fcb 98,101,113,0
L25 fcb 98,110,101,0
L26 fcb 98,108,111,0
L27 fcb 98,104,105,0
L28 fcb 98,108,115,0
L29 fcb 98,104,115,0
L30 fcb 98,110,101,0
L31 fcb 98,101,113,0
L32 fcb 98,104,115,0
L33 fcb 98,108,115,0
L34 fcb 98,104,105,0
L35 fcb 98,108,111,0
L44 fcb 69,114,114,111,114,32,114,101,97,100,105,110,103,32,105,110
 fcb 116,101,114,109,101,100,105,97,116,101,32,102,105,108,101,32
 fcb 45,32,112,97,115,115,32,50,32,97,98,111,114,116,101,100
 fcb 33,13,0
L64 fcb 66,97,100,32,105,110,116,101,114,109,101,100,105,97,116,101
 fcb 32,102,105,108,101,32,45,32,112,97,115,115,50,32,97,98
 fcb 111,114,116,101,100,46,13,0
L112 fcb 48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70
 fcb 0
 text
 end
