 text
* /* simple integer operation test */
* 
* main() {
 global main
main
 pshs y,u
 jmp 1f
2
* 
*   int a,b,c,d;
* 
*   a=b+c;
 leas -8,s
 ldd 4,s
 addd 2,s
 std 6,s
*   a=b;
 ldd 4,s
 std 6,s
*   a=b+c-d+1;
 ldd 4,s
 addd 2,s
 subd ,s
 addd #1
 std 6,s
*   a=(a+b)-(c+d);
 ldd 2,s
 addd ,s
 pshs d
 ldd 8,s
 addd 6,s
 subd ,s++
 std 6,s
*   a=b-(c+3);
 ldd 2,s
 addd #3
 pshs d
 ldd 6,s
 subd ,s++
 std 6,s
*   a=b*c;
 ldd 4,s
 pshs d
 ldd 4,s
 jsr ccmult
 std 6,s
*   a=b*22;
 ldd 4,s
 pshs d
 ldd #22
 jsr ccmult
 std 6,s
*   a=b/c;
 ldd 4,s
 pshs d
 ldd 4,s
 jsr ccdiv
 std 6,s
*   a=b/22;
 ldd 4,s
 pshs d
 ldd #22
 jsr ccdiv
 std 6,s
*   a=b/(c+d);
 ldd 4,s
 pshs d
 ldd 4,s
 addd 2,s
 jsr ccdiv
 std 6,s
*   a=b>>c;
 ldd 4,s
 pshs d
 ldd 4,s
 jsr ccasr
 std 6,s
*   a=b>>5;
 ldd 4,s
 pshs d
 ldd #5
 jsr ccasr
 std 6,s
*   a=b>>2;
 ldd 4,s
 asra
 rorb
 asra
 rorb
 std 6,s
*   a=b>>(c+d);
 ldd 4,s
 pshs d
 ldd 4,s
 addd 2,s
 jsr ccasr
 std 6,s
*   a=(b+c)>>d;
 ldd 4,s
 addd 2,s
 pshs d
 ldd 2,s
 jsr ccasr
 std 6,s
*   a=b&c;
 ldd 4,s
 anda 2,s
 andb 3,s
 std 6,s
*   a=b&1;
 ldd 4,s
 andb #1
 clra
 std 6,s
*   a+=b;
 ldd 6,s
 addd 4,s
 std 6,s
*   a+=b+c;
 ldd 6,s
 pshs d
 ldd 6,s
 addd 4,s
 addd ,s++
 std 6,s
*   a-=b;
 ldd 6,s
 subd 4,s
 std 6,s
*   a-=(b+c);
 ldd 6,s
 pshs d
 ldd 6,s
 addd 4,s
 nega
 negb
 sbca #0
 addd ,s++
 std 6,s
* }
 leas 8,s
 puls y,u,pc

1 ldd #-138
 jsr _stkcheck
 jmp 2b


 bss
 name inttest_c
