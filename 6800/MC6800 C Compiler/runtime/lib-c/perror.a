 name perror.c
 text
 bss
 global _sys_err
_sys_err rmb 200
 data
 global _sys_ner
_sys_ner fdb 65535
 text
 global __ierrms
__ierrms pshs u,y
 leay 2,s
 leas -L2,s
* Auto -4 errfp1
* Auto -6 errfp2
* Register 128 bufptr
* Auto -8 arraypt
* Auto -10 posstr1
* Auto -12 ptrof
* Auto -14 nbytes
* Auto -16 noerror
* Auto -18 nslots
* Auto -20 shortin
* Begin expression - 100
 ldx #L5
 stx 0,s
 ldx #L4
 pshs x
 jsr _fopen
 tfr d,x
 leas 2,s
 stx -4,y
 lbeq L3
 ldx -4,y
 stx 0,s
 ldd #1
 pshs d
 ldd #2
 pshs d
 leax -20,y
 pshs x
 jsr _fread
 leas 6,s
 cmpd #1
 lbne L3
 ldd -20,y
10
 lble L3
* Begin expression - 107
 ldx #L8
 stx 0,s
 ldx #L7
 pshs x
 jsr _fopen
 tfr d,x
 leas 2,s
 stx -6,y
 lbeq L6
* Begin expression - 115
 ldd -20,y
 std -10,y
* Begin expression - 116
 ldd #0
 std -12,y
* Begin expression - 117
 ldd #0
 std -14,y
* Begin expression - 118
 ldd #0
 std -18,y
* Begin expression - 119
 ldd #116
 std -16,y
L9
* Begin expression - 120
 ldd -12,y
 cmpd -10,y
 lbge L10
 ldd -16,y
10
 lbeq L10
* Begin expression - 122
 ldd -20,y
 lbeq L11
* Begin expression - 124
 ldd #0
 std 0,s
 ldd -20,y
 pshs d
 bmi 1f
 clra
 clrb
 bra 2f
1 ldd #$ffff
2 pshs d
 ldx -6,y
 pshs x
 jsr _fseek
 leas 6,s
 addd #0
 lbne L12
 ldx -6,y
 stx 0,s
 ldd #1
 pshs d
 ldd #2
 pshs d
 leax -20,y
 pshs x
 jsr _fread
 leas 6,s
 cmpd #1
10
 lbne L12
* Begin expression - 125
 ldd -20,y
 addd -14,y
 std -14,y
 lbra L13
L12
* Begin expression - 126
 ldd #0
 std -16,y
L13
L11
* Begin expression - 127
 ldd -16,y
 lbeq L14
* Begin expression - 128
 ldx -4,y
 stx 0,s
 ldd #1
 pshs d
 ldd #2
 pshs d
 leax -20,y
 pshs x
 jsr _fread
 leas 6,s
 cmpd #1
 lbne L15
* Begin expression - 130
 ldd -12,y
 addd #2
 std -12,y
* Begin expression - 131
 inc -17,y
 lbne L16
 inc -18,y
 lbra L16
L15
* Begin expression - 133
 ldd #0
 std -16,y
L16
L14
 lbra L9
L10
* Begin expression - 136
 ldd -16,y
 lbeq L17
 ldd -14,y
 std 0,s
 jsr _malloc
 tfr d,x
 leau 0,x
 cmpu #0
10
 lbeq L17
* Begin expression - 144
 ldx -4,y
 stx 0,s
 jsr _rewind
* Begin expression - 145
 ldx #_sys_err
 stx -8,y
L18
* Begin expression - 147
 ldd -16,y
 lbeq L19
 ldd -18,y
 subd #1
 std -18,y
 lblt L19
 ldx -4,y
 stx 0,s
 ldd #1
 pshs d
 ldd #2
 pshs d
 leax -20,y
 pshs x
 jsr _fread
 leas 6,s
 cmpd #1
10
 lbne L19
* Begin expression - 148
 ldd -20,y
 lbeq L20
* Begin expression - 151
 ldd #0
 std 0,s
 ldd -20,y
 pshs d
 bmi 1f
 clra
 clrb
 bra 2f
1 ldd #$ffff
2 pshs d
 ldx -6,y
 pshs x
 jsr _fseek
 leas 6,s
 addd #0
 lbne L21
 ldx -6,y
 stx 0,s
 ldd #1
 pshs d
 ldd #2
 pshs d
 leax -20,y
 pshs x
 jsr _fread
 leas 6,s
 cmpd #1
 lbne L21
 ldx -6,y
 stx 0,s
 ldd #1
 pshs d
 ldd -20,y
 pshs d
 pshs u
 jsr _fread
 leas 6,s
 cmpd #1
10
 lbne L21
* Begin expression - 153
 ldx -8,y
 leax 2,x
 stx -8,y
 stu -2,x
* Begin expression - 154
 ldd -20,y
 leau d,u
 lbra L22
L21
* Begin expression - 157
 ldd #0
 std -16,y
L22
 lbra L23
L20
* Begin expression - 159
 ldx -8,y
 leax 2,x
 stx -8,y
 leax -2,x
 stx 0,s
 ldx #0
 stx [0,s]
L23
 lbra L18
L19
* Begin expression - 165
 ldd -8,y
 subd #_sys_err
 asra
 rorb
 addd #-1
 std _sys_ner
L17
* Begin expression - 167
 ldx -6,y
 stx 0,s
 jsr _fclose
L6
* Begin expression - 169
 ldx -4,y
 stx 0,s
 jsr _fclose
L3
L1
L2 equ 20
 leas -2,y
 puls y,u,pc
 global _perror
_perror pshs u,y
 leay 2,s
 leas -L25,s
* Auto 4 s
* Register 128 p
* Auto -4 signfla
* Auto -6 shortin
* Auto -8 lclfd
* Auto -136 msgbuf
* Auto -162 flnambu
* Auto -164 errnum
* Auto -166 errvalu
* Auto -168 errclas
* Auto -170 q
* Begin expression - 220
 ldd _errno
 std -164,y
* Begin expression - 225
 ldd _sys_ner
 lbge L27
* Begin expression - 225
 jsr __ierrms
L27
* Begin expression - 230
 ldx 4,y
 lbeq L28
* Begin expression - 232
 ldx #__iob+28
 stx 0,s
 ldx 4,y
 pshs x
 jsr _fputs
 leas 2,s
* Begin expression - 233
 ldx #__iob+28
 stx 0,s
 ldx #L29
 pshs x
 jsr _fputs
 leas 2,s
L28
* Begin expression - 236
 ldd -164,y
 cmpd #512
 lbge L30
* Begin expression - 244
 addd #0
 lblt L31
 cmpd _sys_ner
 lbgt L31
 lslb
 rola
 ldx #_sys_err
 ldu d,x
10
 lbeq L31
* Begin expression - 244
 ldx #__iob+28
 stx 0,s
 pshs u
 jsr _fputs
 leas 2,s
 lbra L32
L31
* Begin expression - 247
 ldx #__iob+28
 stx 0,s
 ldx #L33
 pshs x
 jsr _fputs
 leas 2,s
* Begin expression - 248
 leax -4,y
 stx 0,s
 ldx #L34
 pshs x
 ldd #10
 pshs d
 ldd -164,y
 pshs d
 jsr __itostr
 leas 6,s
 tfr d,x
 leau 0,x
* Begin expression - 249
 ldd -4,y
 lbeq L35
* Begin expression - 249
 ldx #__iob+28
 stx 0,s
 ldd #45
 pshs d
 jsr _fputc
 leas 2,s
L35
* Begin expression - 250
 ldx #__iob+28
 stx 0,s
 pshs u
 jsr _fputs
 leas 2,s
L32
 lbra L36
L30
* Begin expression - 255
 ldu #0
* Begin expression - 256
 ldd -164,y
 cmpd #1024
 lbge L37
* Begin expression - 258
 addd #-512
 std -166,y
* Begin expression - 259
 ldx #L39
 stx 0,s
 ldx #L38
 pshs x
 jsr _fopen
 leas 2,s
 std -8,y
 lbra L40
L37
* Begin expression - 263
 ldd -164,y
 std 0,s
 ldd #256
 jsr imod
 std -166,y
* Begin expression - 264
 ldd -164,y
 addd #-1024
 tfr a,b
 sex
 std -168,y
* Begin expression - 265
 ldx #L41
 stx 0,s
 leax -162,y
 pshs x
 jsr _strcpy
 leas 2,s
* Begin expression - 266
 leax -138,y
 stx -170,y
* Begin expression - 267
 ldd -168,y
 std 0,s
 ldd #10
 jsr imod
 addd #48
 stb [-170,y]
* Begin expression - 268
 ldd -168,y
 std 0,s
 ldd #10
 jsr idiv
 std -168,y
 std 0,s
 ldd #10
 jsr imod
 addd #48
 ldx -170,y
 stb 0,-x
 stx -170,y
* Begin expression - 269
 ldd -168,y
 std 0,s
 ldd #10
 jsr idiv
 std -168,y
 std 0,s
 ldd #10
 jsr imod
 addd #48
 ldx -170,y
 stb 0,-x
 stx -170,y
* Begin expression - 270
 ldd -168,y
 std 0,s
 ldd #10
 jsr idiv
 std -168,y
 std 0,s
 ldd #10
 jsr imod
 addd #48
 ldx -170,y
 stb 0,-x
 stx -170,y
* Begin expression - 271
 ldx #L42
 stx 0,s
 leax -162,y
 pshs x
 jsr _fopen
 leas 2,s
 std -8,y
L40
* Begin expression - 273
 ldx #0
 cmpx -8,y
 lbeq L43
* Begin expression - 283
 ldx -8,y
 stx 0,s
 ldd #1
 pshs d
 ldd #2
 pshs d
 leax -6,y
 pshs x
 jsr _fread
 leas 6,s
 cmpd #1
 lbne L44
 ldd -6,y
 lbeq L44
 ldd -166,y
 std 0,s
 ldd #2
 jsr imul
 std -166,y
 std 0,s
 ldd -6,y
 cmpd 0,s
 lble L44
 ldd #0
 std 0,s
 ldd -166,y
 pshs d
 ldx -8,y
 pshs x
 jsr _fseek
 leas 4,s
 addd #0
 lbne L44
 ldx -8,y
 stx 0,s
 ldd #1
 pshs d
 ldd #2
 pshs d
 leax -6,y
 pshs x
 jsr _fread
 leas 6,s
 cmpd #1
 lbne L44
 ldd #0
 std 0,s
 ldd -6,y
 pshs d
 bmi 1f
 clra
 clrb
 bra 2f
1 ldd #$ffff
2 pshs d
 ldx -8,y
 pshs x
 jsr _fseek
 leas 6,s
 addd #0
 lbne L44
 ldx -8,y
 stx 0,s
 ldd #1
 pshs d
 ldd #2
 pshs d
 leax -6,y
 pshs x
 jsr _fread
 leas 6,s
 cmpd #1
 lbne L44
 ldd -6,y
 cmpd #128
 lbgt L44
 ldx -8,y
 stx 0,s
 ldd -6,y
 pshs d
 ldd #1
 pshs d
 leax -136,y
 pshs x
 jsr _fread
 leas 6,s
 addd #0
10
 lble L44
* Begin expression - 285
 leau -136,y
* Begin expression - 286
 ldd -6,y
 leax -136,y
 clr d,x
L44
* Begin expression - 288
 ldx -8,y
 stx 0,s
 jsr _fclose
L43
* Begin expression - 290
 cmpu #0
 lbeq L45
* Begin expression - 290
 ldx #__iob+28
 stx 0,s
 pshs u
 jsr _fputs
 leas 2,s
 lbra L46
L45
* Begin expression - 293
 ldx #__iob+28
 stx 0,s
 ldx #L47
 pshs x
 jsr _fputs
 leas 2,s
* Begin expression - 294
 leax -4,y
 stx 0,s
 ldx #L48
 pshs x
 ldd #10
 pshs d
 ldd -164,y
 pshs d
 jsr __itostr
 leas 6,s
 tfr d,x
 leau 0,x
* Begin expression - 295
 ldd -4,y
 lbeq L49
* Begin expression - 295
 ldx #__iob+28
 stx 0,s
 ldd #45
 pshs d
 jsr _fputc
 leas 2,s
L49
* Begin expression - 296
 ldx #__iob+28
 stx 0,s
 pshs u
 jsr _fputs
 leas 2,s
L46
L36
* Begin expression - 303
 ldx #__iob+28
 stx 0,s
 ldd #13
 pshs d
 jsr _fputc
 leas 2,s
L24
L25 equ 170
 leas -2,y
 puls y,u,pc
 data
L4 fcb 47,103,101,110,47,101,114,114,111,114,115,47,115,121,115,116
 fcb 101,109,0
L5 fcb 114,0
L7 fcb 47,103,101,110,47,101,114,114,111,114,115,47,115,121,115,116
 fcb 101,109,0
L8 fcb 114,0
L26 fcb 47,103,101,110,47,101,114,114,111,114,115,47,101,114,114,111
 fcb 114,102,105,108,101,88,88,88,88,0
L29 fcb 58,32,0
L33 fcb 78,111,32,109,101,115,115,97,103,101,32,102,111,114,32,101
 fcb 114,114,110,111,32,61,32,0
L34 fcb 48,49,50,51,52,53,54,55,56,57,0
L38 fcb 47,103,101,110,47,101,114,114,111,114,115,47,108,111,99,97
 fcb 108,0
L39 fcb 114,0
L41 fcb 47,103,101,110,47,101,114,114,111,114,115,47,101,114,114,111
 fcb 114,102,105,108,101,88,88,88,88,0
L42 fcb 114,0
L47 fcb 78,111,32,109,101,115,115,97,103,101,32,102,111,114,32,101
 fcb 114,114,110,111,32,61,32,0
L48 fcb 48,49,50,51,52,53,54,55,56,57,0
 text
 end
