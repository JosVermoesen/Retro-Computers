
/usr/kevin/src/c/README


     Organizational notes:

        - Files under the control of the C-library project
          use the following suffix conventions:
               *.a       Assembler language source
               *.c       C source
               *.A       Assembler "lib" source
               *.h       C "#include" source
               *.mak     Script for "update_all"
        - Scripts to "update_all" control building and
          installing the libraries
        - All of the standard libraries (*.h) for C code
          live in
              /usr/kevin/src/lib/include
        - All of the standard libraries (*.A) for assembler
          language code live in
              /usr/kevin/src/lib
        - All of the system-defined standard libraries are
          expected to be in "/lib" and are expected to be
          current
        - The file "NOTES" is a running synopsis of the changes
          to and releases made of the builtins package.  An 
          entry should be made every time a bug is fixed, an
          enhancement is made, a builtin or runtime is added
          or removed, or a release is made.


     Building the C libraries

          The script for "update_all" called "lib.mak"
     controls the generation of the libraries available
     to C on different systems.  That script has 5 (five)
     arguments:

       #1 The library package being built.  Currently, the
          following are known:  "clib", "clibs", "kpmclib",
          "unixlib", and "unixlibs".
       #2 Options to the loader.  Use "n" if the library does
          not already exist, otherwise use "o".  (The libraries
          will live in "/usr/kevin/obj/#1")
       #3 Options to the C compiler.  If none are desired,
          use "v".
       #4 The floating-point package to use.  The following
          floating-point packages are available:
               Common   Emulated, non-IEEE format
               Tek4404  IEEE format, uses Tektronix 4404 
                        interface to the NS32081 FPU
       #5 Options to the assembler while assembling code
          containing operating-system calls ("sys").  If
          no special options are desired, use "f".

     All *.r files and the libraries "clib" and "cmathlib" 
     will be found in the directory:
          /usr/kevin/obj/#1
     where #1 is the first argument to the shell script above.

          The script for "update_all" called "lcllib.mak"
     builds the local library (contains builtins not to be
     released to the general user population).  That has
     three arguments, identical to the first three arguments
     to the script "lib.mak", described above.  The 
     finished copy of the local library "lcllib" will 
     be called
          /usr/kevin/obj/#1/lcllib

          The script "install.mak" puts all of the libraries
     in their proper places.  It also installs the assembler
     "lib" files and the C "#include" files.

     To build the C libraries, use the following commands,
     replacing the "?" with "o" if the library already
     exists, or "n" if the library doesn't already exist:
     1.  UniFLEX, stack-checking code
         update_all lib.mak clib ? v Common f
     2.  UniFLEX, no-stack-checking code
         update_all lib.mak clibs ? vs Common f

     To build the local libraries:
     1.  UniFLEX, stack-checking code
         update_all lcllib.mak clib ? v
     2.  UniFLEX, no-stack-checking code
         update_all lcllib.mak clibs ? vs

     To build Tek4404 floating-point library, change directories
     to ./Tek4404 and read the README there

     To recompile all C sources, touch the file "newcc".  To
     reassemble all assembler sources, touch the file "newasm".
