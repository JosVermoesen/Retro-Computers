 name qsort.c
 text
 global _qsort
_qsort pshs u,y
 leay 2,s
 leax -(L2+256),s
 cmpx stk_base
 bhs 1f
 jsr grows
1
 leas -L2,s
* Auto 4 base
* Auto 6 nel
* Auto 8 width
* Auto 10 compar
* Auto -258 temp_el
* Auto -260 rtnval
* Begin expression - 18
 ldd 8,y
 cmpd #256
 lbhi L3
* Begin expression - 19
 leax -258,y
 stx 0,s
 ldx 10,y
 pshs x
 pshs d
 ldd 6,y
 addd #-1
 pshs d
 ldd 8,y
 jsr umul
 leas 2,s
 ldx 4,y
 leax d,x
 pshs x
 ldx 4,y
 pshs x
 jsr _qsortx
 leas 8,s
* Begin expression - 20
 clra
 clrb
 std -260,y
 lbra L4
L3
* Begin expression - 21
 ldd #-1
 std -260,y
L4
* Begin expression - 22
 ldd -260,y
L1
L2 equ 260
 leas -2,y
 puls y,u,pc
_qsortx pshs u,y
 leay 2,s
 leax -(L6+256),s
 cmpx stk_base
 bhs 1f
 jsr grows
1
 leas -L6,s
* Auto 4 left
* Auto 6 right
* Auto 8 width
* Auto 10 compar
* Begin expression - 0
 ldu 12,y
* Register 128 median
* Auto -4 l
* Auto -6 r
* Auto -8 medpos
* Begin expression - 36
 ldx 4,y
 cmpx 6,y
 lbeq L7
* Begin expression - 38
 ldx 4,y
 stx -4,y
* Begin expression - 38
 ldx 6,y
 stx -6,y
* Begin expression - 38
 ldd 8,y
 std 0,s
 ldx 6,y
 pshs x
 pshs u
 jsr _cpy_ele
 leas 4,s
L8
* Begin expression - 39
 ldx -4,y
 cmpx -6,y
 lbhs L9
L10
* Begin expression - 41
 stu 0,s
 ldx -4,y
 pshs x
 jsr [10,y]
 leas 2,s
 addd #0
 lbge L11
* Begin expression - 41
 ldd 8,y
 ldx -4,y
 leax d,x
 stx -4,y
 lbra L10
L11
* Begin expression - 42
 ldx -4,y
 cmpx -6,y
 lbhs L12
* Begin expression - 44
 ldd 8,y
 std 0,s
 ldx -4,y
 pshs x
 ldx -6,y
 pshs x
 jsr _cpy_ele
 leas 4,s
* Begin expression - 44
 ldd 8,y
 std 0,s
 pshs u
 ldx -4,y
 pshs x
 jsr _cpy_ele
 leas 4,s
* Begin expression - 44
 ldd 8,y
 nega
 negb
 sbca #0
 ldx -6,y
 leax d,x
 stx -6,y
L13
* Begin expression - 45
 ldx -6,y
 stx 0,s
 pshs u
 jsr [10,y]
 leas 2,s
 addd #0
 lbge L14
* Begin expression - 45
 ldd 8,y
 nega
 negb
 sbca #0
 ldx -6,y
 leax d,x
 stx -6,y
 lbra L13
L14
* Begin expression - 46
 ldx -4,y
 cmpx -6,y
 lbhs L15
* Begin expression - 48
 ldd 8,y
 std 0,s
 ldx -6,y
 pshs x
 ldx -4,y
 pshs x
 jsr _cpy_ele
 leas 4,s
* Begin expression - 48
 ldd 8,y
 std 0,s
 pshs u
 ldx -6,y
 pshs x
 jsr _cpy_ele
 leas 4,s
* Begin expression - 48
 ldd 8,y
 ldx -4,y
 leax d,x
 stx -4,y
L15
L12
 lbra L8
L9
* Begin expression - 52
 ldx -4,y
 stx -8,y
* Begin expression - 53
 ldd 8,y
 nega
 negb
 sbca #0
 ldx -8,y
 leax d,x
 cmpx 4,y
 lbls L16
* Begin expression - 54
 stu 0,s
 ldx 10,y
 pshs x
 ldd 8,y
 pshs d
 nega
 negb
 sbca #0
 ldx -8,y
 leax d,x
 pshs x
 ldx 4,y
 pshs x
 jsr _qsortx
 leas 8,s
L16
* Begin expression - 55
 ldd 8,y
 ldx -8,y
 leax d,x
 cmpx 6,y
 lbhs L17
* Begin expression - 56
 stu 0,s
 ldx 10,y
 pshs x
 pshs d
 ldx 6,y
 pshs x
 ldx -8,y
 leax d,x
 pshs x
 jsr _qsortx
 leas 8,s
L17
L7
L5
L6 equ 8
 leas -2,y
 puls y,u,pc
_cpy_ele pshs u,y
 leay 2,s
 leax -(L19+256),s
 cmpx stk_base
 bhs 1f
 jsr grows
1
 leas -L19,s
* Begin expression - 0
 ldu 4,y
* Register 128 dest
* Auto 6 src
* Auto 8 width
L20
* Begin expression - 65
 ldd 8,y
 tst 9,y
 bne 1f
 dec 8,y
1 dec 9,y
 addd #0
 lbeq L21
* Begin expression - 66
 ldx 6,y
 ldb 0,x+
 stx 6,y
 stb 0,u+
 lbra L20
L21
L18
L19 equ 2
 leas -2,y
 puls y,u,pc
 data
 text
 end
