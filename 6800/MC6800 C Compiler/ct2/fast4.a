 text
* #define CONST 7
* 
* char count;
* 
* main() {
 global main
main
 pshs y,u
 jmp 1f
2
*   int a,b,c;
*   int d;
* 
*   c=26+CONST;
 leas -8,s
 ldd #33
 std 2,s
*   for (d=10000; d; --d) {
 ldd #10000
 std ,s
_3
 ldd ,s
 lbeq _2
_1
*     count = 10;
 ldd #10
 stb count
*     while (--count) {
_6
 ldb count
 addd #-1
 stb count
 lbeq _5
_7
*       a=max(100,d,1);
 ldd #1
 pshs d
 ldd 2,s
 pshs d
 ldd #100
 pshs d
 jsr max
 leas 6,s
 std 6,s
*      b=c*512;
 ldd 2,s
 pshs d
 ldd #9
 jsr ccasl
 std 4,s
*   }
*   }
 jmp _6
_5
* }
_4
 ldd ,s
 addd #-1
 std ,s
 jmp _3
_2
 leas 8,s
 puls y,u,pc

1 ldd #-148
 jsr _stkcheck
 jmp 2b


* 
* max(a,b,c) {
 global max
max
 pshs y,u
 jmp 1f
2
*   int m;
* 
*   m=(a>b) ? a : b;
 leas -2,s
 ldd 8,s
 cmpd 10,s
 lble _8
_9
 ldd 8,s
 jmp _10
_8
 ldd 10,s
_10
 std ,s
*   return((m>c) ? m : c);
 ldd ,s
 cmpd 12,s
 lble _11
_12
 ldd ,s
 jmp _13
_11
 ldd 12,s
_13
 leas 2,s
 puls y,u,pc

* }
1 ldd #-130
 jsr _stkcheck
 jmp 2b


 bss
 name fast4_c
 define
count rmb 1
 enddef
