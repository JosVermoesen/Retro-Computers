 name p1-mat.c
 text
 global _bildmat
_bildmat pshs u,y
 leay 2,s
 leas -L2,s
* Auto -4 savedim
* Auto -6 ret
* Begin expression - 28
 ldx #_astack
 stx _tos
* Begin expression - 29
 ldx #_contab
 stx _nxtcon
* Begin expression - 30
 ldx #_emat
 stx _nxtmat
* Begin expression - 31
 ldx #_strings
 stx _nxtsst
* Begin expression - 32
 clr _matlev
* Begin expression - 33
 ldx _nxtdim
 stx -4,y
* Begin expression - 34
 ldx #0
 stx _cursubs
* Begin expression - 35
 inc _nokey
* Begin expression - 36
 ldb _cmexfl
 lbeq L3
* Begin expression - 37
 jsr _exp14
 std -6,y
 lbra L4
L3
* Begin expression - 39
 jsr _exp15
 std -6,y
L4
* Begin expression - 40
 clr _cmexfl
* Begin expression - 41
 clr _nokey
* Begin expression - 42
 ldx -4,y
 stx _nxtdim
* Begin expression - 43
 ldd -6,y
L1
L2 equ 6
 leas -2,y
 puls y,u,pc
 global _makeloa
_makeloa pshs u,y
 leay 2,s
 leas -L6,s
* Begin expression - 49
 ldx _tos
 cmpx #_astack
 lbeq L7
* Begin expression - 50
 ldx _tos
 ldx -2,x
 tfr x,d
 cmpd #255
 lbls L8
* Begin expression - 51
 ldd #102
 std 0,s
 jsr _enteru
L8
L7
L5
L6 equ 2
 leas -2,y
 puls y,u,pc
 global _enterb
_enterb pshs u,y
 leay 2,s
 leas -L10,s
* Auto 4 op
* Register 128 pexp
* Auto -4 symp
* Auto -5 tm
* Begin expression - 61
 ldx _tos
 leax -2,x
 stx _tos
 stx -4,y
* Begin expression - 62
 ldu _nxtmat
* Begin expression - 63
 ldd 4,y
 stb 0,u
* Begin expression - 64
 ldd #0
 std 1,u
* Begin expression - 65
 ldx -4,y
 leax -2,x
 stx -4,y
 ldx 2,x
 stx 5,u
* Begin expression - 66
 ldx [-4,y]
 stx 3,u
* Begin expression - 67
 clr 7,u
* Begin expression - 68
 inc _matlev
 ldb _matlev
 stb [-4,y]
* Begin expression - 69
 leax 7,u
 stx _nxtmat
 cmpx #_emat+889
 lblt L11
* Begin expression - 70
 ldd #124
 std 0,s
 jsr _error
L11
* Begin expression - 71
 ldb _matlev
 stb -5,y
* Begin expression - 72
 jsr _foldcon
* Begin expression - 73
 ldb -5,y
 cmpb _matlev
 lbne L12
* Begin expression - 74
 jsr _typechk
L12
L9
L10 equ 5
 leas -2,y
 puls y,u,pc
 global _enteru
_enteru pshs u,y
 leay 2,s
 leas -L14,s
* Auto 4 op
* Register 128 pexp
* Auto -4 ps
* Auto -5 top
* Auto -7 i
* Begin expression - 85
 clr -5,y
* Begin expression - 86
 ldd 4,y
 cmpd #36
 lbne L15
* Begin expression - 87
 ldb #35
 stb -5,y
L15
* Begin expression - 88
 ldd 4,y
 cmpd #35
 lbne L16
* Begin expression - 89
 ldb #36
 stb -5,y
L16
* Begin expression - 90
 ldb -5,y
 lbeq L17
* Begin expression - 91
 ldx _tos
 ldx -2,x
 stx -7,y
* Begin expression - 92
 ldd -7,y
 cmpd #256
 lbhs L18
* Begin expression - 93
 addd #-1
 std 0,s
 ldd #7
 jsr umul
 ldx #_emat
 leau d,x
* Begin expression - 94
 ldb 0,u
 cmpb -5,y
 lbne L19
* Begin expression - 95
 clr 0,u
* Begin expression - 103
 ldx _tos
 leax -2,x
 stx 0,s
 ldx 3,u
 stx [0,s]
* Begin expression - 104
 ldx _nxtmat
 leax -7,x
 stx _nxtmat
* Begin expression - 105
 dec _matlev
 lbra L13
L19
L18
L17
* Begin expression - 110
 ldu _nxtmat
* Begin expression - 111
 ldd 4,y
 stb 0,u
* Begin expression - 112
 ldx #0
 stx 5,u
 tfr x,d
 std 1,u
* Begin expression - 113
 ldx _tos
 ldx -2,x
 stx 3,u
* Begin expression - 114
 clr 7,u
* Begin expression - 115
 ldx _tos
 inc _matlev
 ldb _matlev
 stb -2,x
* Begin expression - 116
 leax 7,u
 stx _nxtmat
 cmpx #_emat+889
 lblt L20
* Begin expression - 117
 ldd #123
 std 0,s
 jsr _error
L20
* Begin expression - 118
 ldb _matlev
 stb -5,y
* Begin expression - 119
 jsr _foldcon
* Begin expression - 120
 ldb -5,y
 cmpb _matlev
 lbne L21
* Begin expression - 121
 jsr _typechk
L21
L13
L14 equ 7
 leas -2,y
 puls y,u,pc
 global _entern
_entern pshs u,y
 leay 2,s
 leas -L23,s
* Auto 4 op
* Register 128 pexp
* Begin expression - 129
 ldu _nxtmat
* Begin expression - 130
 ldd 4,y
 stb 0,u
* Begin expression - 131
 ldx #0
 stx 3,u
 stx 5,u
 tfr x,d
 std 1,u
* Begin expression - 132
 clr 7,u
* Begin expression - 133
 inc _matlev
* Begin expression - 134
 leax 7,u
 stx _nxtmat
 cmpx #_emat+889
 lblt L24
* Begin expression - 135
 ldd #123
 std 0,s
 jsr _error
L24
* Begin expression - 136
 jsr _typechk
L22
L23 equ 2
 leas -2,y
 puls y,u,pc
 global _entera
_entera pshs u,y
 leay 2,s
 leas -L26,s
* Auto 4 op
* Register 128 pexp
* Begin expression - 144
 ldu _nxtmat
* Begin expression - 145
 ldd 4,y
 stb 0,u
* Begin expression - 146
 ldx #0
 stx 5,u
 tfr x,d
 std 1,u
* Begin expression - 147
 ldx _tos
 leax -2,x
 stx _tos
 ldx 0,x
 stx 3,u
* Begin expression - 148
 clr 7,u
* Begin expression - 149
 inc _matlev
* Begin expression - 150
 leax 7,u
 stx _nxtmat
 cmpx #_emat+889
 lblt L27
* Begin expression - 151
 ldd #123
 std 0,s
 jsr _error
L27
* Begin expression - 152
 jsr _typechk
L25
L26 equ 2
 leas -2,y
 puls y,u,pc
 global _putorb
_putorb pshs u,y
 leay 2,s
 leas -L29,s
* Begin expression - 158
 jsr _makeloa
* Begin expression - 159
 ldd #93
 std 0,s
 jsr _doorb
* Begin expression - 160
 ldx _tos
 leax 2,x
 stx _tos
 ldb _matlev
 stb -2,x
L28
L29 equ 2
 leas -2,y
 puls y,u,pc
 global _doorb
_doorb pshs u,y
 leay 2,s
 leas -L31,s
* Auto 4 op
* Register 128 p
* Begin expression - 168
 ldx _nxtmat
 leau -7,x
L32
* Begin expression - 169
 ldb 0,u
 cmpb #94
 lbne L33
 ldd 4,y
 cmpd #97
10
 lbeq L33
* Begin expression - 170
 leau -7,u
 leax 7,u
 stx _nxtmat
* Begin expression - 171
 dec _matlev
* Begin expression - 172
 ldd #97
 std 4,y
 lbra L32
L33
* Begin expression - 174
 ldb 0,u
 cmpb #96
 lbne L34
* Begin expression - 175
 stu _nxtmat
* Begin expression - 176
 dec _matlev
* Begin expression - 177
 ldd 4,y
 std 0,s
 jsr _doorb
* Begin expression - 178
 ldd #96
 std 0,s
 jsr _entern
 lbra L30
L34
* Begin expression - 180
 ldd 4,y
 std 0,s
 jsr _entera
L30
L31 equ 2
 leas -2,y
 puls y,u,pc
 global _putore
_putore pshs u,y
 leay 2,s
 leas -L36,s
* Begin expression - 186
 jsr _makeloa
* Begin expression - 188
 ldd #94
 std 0,s
 jsr _entern
* Begin expression - 189
 ldx _tos
 leax -2,x
 stx _tos
* Begin expression - 190
 ldx _tos
 leax -2,x
 stx 0,s
 ldx [_tos]
 stx [0,s]
L35
L36 equ 2
 leas -2,y
 puls y,u,pc
 global _putanb
_putanb pshs u,y
 leay 2,s
 leas -L38,s
* Begin expression - 196
 jsr _makeloa
* Begin expression - 197
 ldd #95
 std 0,s
 jsr _doanb
* Begin expression - 198
 ldx _tos
 leax 2,x
 stx _tos
 ldb _matlev
 stb -2,x
L37
L38 equ 2
 leas -2,y
 puls y,u,pc
 global _doanb
_doanb pshs u,y
 leay 2,s
 leas -L40,s
* Auto 4 op
* Register 128 p
* Begin expression - 206
 ldx _nxtmat
 leau -7,x
L41
* Begin expression - 207
 ldb 0,u
 cmpb #96
 lbne L42
 ldd 4,y
 cmpd #98
10
 lbeq L42
* Begin expression - 208
 leau -7,u
 leax 7,u
 stx _nxtmat
* Begin expression - 209
 dec _matlev
* Begin expression - 210
 ldd #98
 std 4,y
 lbra L41
L42
* Begin expression - 212
 ldb 0,u
 cmpb #94
 lbne L43
* Begin expression - 213
 stu _nxtmat
* Begin expression - 214
 dec _matlev
* Begin expression - 215
 ldd 4,y
 std 0,s
 jsr _doanb
* Begin expression - 216
 ldd #94
 std 0,s
 jsr _entern
 lbra L39
L43
* Begin expression - 218
 ldd 4,y
 std 0,s
 jsr _entera
L39
L40 equ 2
 leas -2,y
 puls y,u,pc
 global _putane
_putane pshs u,y
 leay 2,s
 leas -L45,s
* Begin expression - 224
 jsr _makeloa
* Begin expression - 226
 ldd #96
 std 0,s
 jsr _entern
* Begin expression - 227
 ldx _tos
 leax -2,x
 stx _tos
* Begin expression - 228
 ldx _tos
 leax -2,x
 stx 0,s
 ldx [_tos]
 stx [0,s]
L44
L45 equ 2
 leas -2,y
 puls y,u,pc
 global _outexp
_outexp pshs u,y
 leay 2,s
 leas -L47,s
* Register 128 p
* Begin expression - 236
 jsr _outtext
* Begin expression - 237
 ldd _line
 std 0,s
 ldd #129
 pshs d
 ldx #L48
 pshs x
 jsr _outil
 leas 4,s
* Begin expression - 238
 clr _matlev
* Begin expression - 239
 ldu #_emat
L49
* Begin expression - 239
 ldb 0,u
 lbeq L50
* Begin expression - 240
 ldd 1,u
 std 0,s
 ldb 0,u
 sex
 pshs d
 ldx #L52
 pshs x
 jsr _outil
 leas 4,s
* Begin expression - 241
 ldx 3,u
 lbeq L53
* Begin expression - 242
 ldx 3,u
 stx 0,s
 jsr _outop
* Begin expression - 243
 ldx 5,u
 lbeq L54
* Begin expression - 244
 ldx 5,u
 stx 0,s
 jsr _outop
L54
L53
L51
* Begin expression - 246
 leau 7,u
 inc _matlev
 lbra L49
L50
L46
L47 equ 2
 leas -2,y
 puls y,u,pc
 global _outop
_outop pshs u,y
 leay 2,s
 leas -L56,s
* Auto 4 optr
* Register 128 p
* Auto -4 np
* Auto -6 tp
* Begin expression - 258
 ldu 4,y
* Begin expression - 259
 tfr u,d
 cmpd #256
 lbhs L57
* Begin expression - 260
 stu 0,s
 ldd #133
 pshs d
 ldx #L58
 pshs x
 jsr _outil
 leas 4,s
 lbra L55
L57
* Begin expression - 263
 ldd 0,u
 clra
 andb #$F
 cmpd #15
 lbne L59
* Begin expression - 264
 stu -4,y
* Begin expression - 265
 ldd [-4,y]
 tfr a,b
 sex
 std 0,s
 ldd #132
 pshs d
 ldx #L60
 pshs x
 jsr _outil
 leas 4,s
* Begin expression - 266
 ldx -4,y
 ldd 0,x++
 stx -4,y
 tfr a,b
 sex
 std -6,y
* Begin expression - 276
 cmpd #11
 lbne L61
* Begin expression - 277
 ldx -4,y
 ldd 0,x++
 stx -4,y
 std 0,s
 ldx #L62
 pshs x
 jsr _outil
 leas 2,s
* Begin expression - 278
 ldx -4,y
 ldd 0,x++
 stx -4,y
 std 0,s
 ldx #L63
 pshs x
 jsr _outil
 leas 2,s
L61
* Begin expression - 280
 ldd -6,y
 cmpd #7
 lble L64
* Begin expression - 281
 ldx -4,y
 ldd 0,x++
 stx -4,y
 std 0,s
 ldx #L65
 pshs x
 jsr _outil
 leas 2,s
L64
* Begin expression - 282
 ldx -4,y
 ldd 0,x++
 stx -4,y
 std 0,s
 ldx #L66
 pshs x
 jsr _outil
 leas 2,s
 lbra L55
L59
* Begin expression - 286
 ldb 2,u
 cmpb #4
 lbne L67
* Begin expression - 287
 ldx 4,u
 stx 0,s
 ldd 0,u
 pshs d
 ldb 2,u
 sex
 pshs d
 ldd #131
 pshs d
 ldx #L68
 pshs x
 jsr _outil
 leas 8,s
 lbra L69
L67
* Begin expression - 289
 ldd 6,u
 std 0,s
 ldd 0,u
 pshs d
 ldb 2,u
 sex
 pshs d
 ldd #131
 pshs d
 ldx #L70
 pshs x
 jsr _outil
 leas 8,s
L69
L55
L56 equ 6
 leas -2,y
 puls y,u,pc
 data
L48 fcb 37,99,37,114,0
L52 fcb 37,99,37,114,0
L58 fcb 37,99,37,114,0
L60 fcb 37,99,37,99,0
L62 fcb 37,114,0
L63 fcb 37,114,0
L65 fcb 37,114,0
L66 fcb 37,114,0
L68 fcb 37,99,37,99,37,114,95,37,110,0
L70 fcb 37,99,37,99,37,114,37,114,0
 text
 end
