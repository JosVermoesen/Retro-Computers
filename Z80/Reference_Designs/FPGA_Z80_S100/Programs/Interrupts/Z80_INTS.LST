Z80ASM SuperFast Relocating Macro Assembler     	    Z80ASM 1.30 Page   1
Z80_INTSZ80

    1                   ;Program to test Z80 Interrupts on the S100Computers.com Z80_FPGA Board.
    2                   ;Note this program assumes teh console is the propeller IO board. Adjust for USB port
    3                   
    4                   ;	John Monahan	S100Computers.com	8/5/2019
    5                   ;
    6                   ;
    7                   ;V1.0		7/30/2019	;First version. It is "rough & ready" with little menu etc. error checking etc.
    8                   ;				;Note address input Hex values must be 4 digits. Data (byte) values 2 digits
    9                   ;	PORT ASSIGNMENTS
   10                   ;				
   11         0000      CONSTAT			EQU	0H		; Console Status Port
   12         0001      CONIN			EQU	1H		; Console IN Port
   13         0001      CONOUT			EQU	1H		; Console OUT Port
   14                   
   15         F000      MONITOR			EQU	0F000H		; Location of Z80 ROM monitor when done.
   16                   
   17         0007      BELL			EQU	07H
   18         001B      ESC			EQU	1BH
   19         000D      CR			EQU	0DH
   20         000A      LF			EQU	0AH
   21                   
   22         1000      INT_ROUTINES:		EQU	1000H		;Page location of Mode 2 Interrupt Routines
   23                   ;------------------------------------------------------------------------------------------
   24                   
   25         0100      	ORG	100H
   26                   	
   27 0100  31 1081     START:	LD	SP,STACK
   28 0103  21 02CC     	LD	HL,SIGNON
   29 0106  CD 01DE     	CALL	PMSG
   30                   
   31 0109  21 032C     START2:	LD	HL,SIGNON1
   32 010C  CD 01DE     	CALL	PMSG
   33 010F  CD 01EE     	CALL	CRLF			;Normal start within menu
   34 0112  0E 3E       	LD	C,'>'	   
   35 0114  CD 02AE     	CALL	CO
   36 0117  CD 02C1     	CALL	CI
   37 011A  FE 1B       	CP	A,ESC
   38 011C  C2 0126     	JP	NZ,START3
   39 011F  CD 01EE     	CALL	CRLF
   40 0122  F3          	DI				; Disable all Ints
   41 0123  C3 F000     	JP	MONITOR
   42                   	
   43 0126  FE 30       START3:	CP	A,'0'
   44 0128  CA 014A     	JP	Z,DISABLE_INTS
   45 012B  FE 31       	CP	A,'1'
   46 012D  CA 0154     	JP	Z,IM1_MODE
   47 0130  FE 32       	CP	A,'2'
   48 0132  CA 0184     	JP	Z,IM2_MODE
   49 0135  C3 013B     	JP	MENU_ERROR
   50 0138  C3 0109     	JP	START2
   51                   
   52 013B              MENU_ERROR:
   53 013B  21 03DD     	LD	HL,MENU_MSG		; "Menu error"
   54 013E  CD 01DE     	CALL	PMSG
   55 0141  C3 0109     	JP	START2
   56                    
   57 0144               DATA_ERROR:
   58 0144  21 03ED     	LD	HL,FORMAT_ERR_MSG	; "DATA  error"
Z80ASM SuperFast Relocating Macro Assembler     	    Z80ASM 1.30 Page   2
Z80_INTSZ80

   59 0147  CD 01DE     	CALL	PMSG
   60                   	
   61                   ;-------------------------------------------------------------------------------------------------
   62 014A              DISABLE_INTS:
   63 014A  21 0417     	LD	HL,MSG0			; 'All Z80 Interrupts are disabled'
   64 014D  CD 01DE     	CALL	PMSG
   65 0150  F3          	DI				; Disable all Ints
   66 0151  C3 0109     	JP	START2
   67                   
   68                   	
   69 0154              IM1_MODE:				; <<<<<<<<<<<<<<<< IM1 MODE >>>>>>>>>>>>>>>>>>>>>>>>
   70 0154  21 043B     	LD	HL,MSG1			; 'Z80 set to IM1 Interrupts Mode.'
   71 0157  CD 01DE     	CALL	PMSG
   72                   	
   73 015A  21 0038     	LD	HL,38H			; Pointer to 38H location in RAM
   74 015D  36 D3       	LD	(HL),0D3H		; "OUT Port 00H
   75 015F  23          	INC	HL
   76 0160  36 00       	LD	(HL),00H
   77 0162  23          	INC	HL
   78 0163  36 FB       	LD	(HL),0FBH		; EI
   79 0165  23          	INC	HL
   80 0166  36 ED       	LD	(HL),0EDH		; RETI
   81 0168  23          	INC	HL
   82 0169  36 4D       	LD	(HL),4DH		
   83                   
   84 016B  ED 56       	IM1				; Set IM1 Mode
   85 016D  FB          	EI
   86 016E  21 045E     	LD	HL,MSG1a		; 'Enter any character. You should hear the buzzer. ESC to return to menu.'
   87 0171  CD 01DE     	CALL	PMSG
   88 0174              IM1_MODE1:
   89 0174  CD 02C1     	CALL	CI
   90 0177  4F          	LD	C,A
   91 0178  CD 02AE     	CALL	CO
   92 017B  FE 1B       	CP	A,ESC
   93 017D  C2 0174     	JP	NZ,IM1_MODE1
   94 0180  F3          	DI				; Disable all Ints
   95 0181  C3 0109     	JP	START2	
   96                   
   97                   
   98 0184              IM2_MODE:				; <<<<<<<<<<<<<<<< IM2 MODE >>>>>>>>>>>>>>>>>>>>>>>>
   99 0184  21 04AA     	LD	HL,MSG2			; 'Z80 set to IM1 Interrupts Mode.'
  100 0187  CD 01DE     	CALL	PMSG
  101                   	
  102 018A  3E 00       	LD	A,0H
  103 018C  ED 47       	LD	I,A			; Vectors Page =00xxH
  104 018E  ED 5E       	IM2				; Set IM1 Mode
  105 0190  FB          	EI
  106                   
  107 0191  CD 01B0     	CALL	SETUP_INT_ROUTINES	;Setup INT Vector routines (at 1000H)
  108                   
  109 0194  21 0512     	LD	HL,MSG5			; 'Entering any keyboard character jumps to the Interrupt vector location. ESC to return to menu.'
  110 0197  CD 01DE     	CALL	PMSG
  111 019A              IM2_MODE2:
  112 019A  CD 01EE     	CALL	CRLF
  113 019D  CD 02C1     	CALL	CI
  114 01A0  4F          	LD	C,A
  115 01A1  CD 02AE     	CALL	CO
  116 01A4  FE 1B       	CP	A,ESC
Z80ASM SuperFast Relocating Macro Assembler     	    Z80ASM 1.30 Page   3
Z80_INTSZ80

  117 01A6  C2 019A     	JP	NZ,IM2_MODE2
  118 01A9  F3          	DI				; Disable all Ints
  119 01AA  CD 01EE     	CALL	CRLF
  120 01AD  C3 0109     	JP	START2	
  121                   
  122                   
  123 01B0              SETUP_INT_ROUTINES:			; Setup routines for 4 highest priority interrupts
  124 01B0  21 0000     	LD	HL,0000H		; Setup Interrupt pointer for INT at 0H
  125 01B3  11 1000     	LD	DE,INT_ROUTINE_00H
  126 01B6  73          	LD	(HL),E
  127 01B7  23          	INC	HL
  128 01B8  72          	LD	(HL),D
  129                   
  130 01B9  21 0020     	LD	HL,0020H		; Setup Interrupt pointer for INT at 20H
  131 01BC  11 100D     	LD	DE,INT_ROUTINE_20H
  132 01BF  73          	LD	(HL),E
  133 01C0  23          	INC	HL
  134 01C1  72          	LD	(HL),D
  135                   	
  136 01C2  21 0028     	LD	HL,0028H		; Setup Interrupt pointer for INT at 28H
  137 01C5  11 101A     	LD	DE,INT_ROUTINE_28H
  138 01C8  73          	LD	(HL),E
  139 01C9  23          	INC	HL
  140 01CA  72          	LD	(HL),D
  141                   	
  142 01CB  21 0030     	LD	HL,0030H		; Setup Interrupt pointer for INT at 30H
  143 01CE  11 1027     	LD	DE,INT_ROUTINE_30H
  144 01D1  73          	LD	(HL),E
  145 01D2  23          	INC	HL
  146 01D3  72          	LD	(HL),D
  147                   	
  148 01D4  21 0038     	LD	HL,0038H		; Setup Interrupt pointer for INT at 38H
  149 01D7  11 1034     	LD	DE,INT_ROUTINE_38H
  150 01DA  73          	LD	(HL),E
  151 01DB  23          	INC	HL
  152 01DC  72          	LD	(HL),D
  153 01DD  C9          	RET
  154                   
  155                   ;<<<<<<<<<<<<<<<<<<<<<<<<< SUPPORT ROUTINES >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
  156                   
  157 01DE  C5          PMSG:	PUSH	BC		; Only [A] and [HL] is changed
  158 01DF  7E          PMSG1:	LD	A,(HL)		; A ROUTINE TO PRINT OUT A STRING @ [HL]
  159 01E0  23          	INC	HL		; UP TO THE FIRST 0.
  160 01E1  B7          	OR	A,A
  161 01E2  CA 01EC     	JP	Z,PMSG_DONE
  162 01E5  4F          	LD	C,A
  163 01E6  CD 02AE     	CALL	CO
  164 01E9  C3 01DF     	JP	PMSG1
  165 01EC              PMSG_DONE:
  166 01EC  C1          	POP	BC
  167 01ED  C9          	RET
  168                   
  169 01EE  C5          CRLF:	PUSH	BC
  170 01EF  0E 0D       	LD	C,CR
  171 01F1  CD 02AE     	CALL	CO
  172 01F4  0E 0A       	LD	C,LF
  173 01F6  CD 02AE     	CALL	CO
  174 01F9  C1          	POP	BC
Z80ASM SuperFast Relocating Macro Assembler     	    Z80ASM 1.30 Page   4
Z80_INTSZ80

  175 01FA  C9          	RET
  176                   
  177 01FB  C5          SPACE:  PUSH	BC
  178 01FC  0E 20       	LD	C,20H
  179 01FE  CD 02AE     	CALL	CO
  180 0201  C1          	POP	BC
  181 0202  C9          	RET
  182                   
  183                   
  184                   ; GET A CHARACTER, convert to UC, ECHO it
  185 0203  CD 02C1     GETCMD:	CALL	CI		
  186 0206  CD 0215     	CALL	UCASE
  187 0209  FE 1B       	CP	A,ESC
  188 020B  C8          	RET	Z		;Don't echo an ESC
  189 020C  F5          	PUSH	AF		;Save it
  190 020D  C5          	PUSH	BC
  191 020E  4F          	LD	C,A
  192 020F  CD 02AE     	CALL	CO		;Echo it
  193 0212  C1          	POP	BC
  194 0213  F1          	POP	AF		;get it back
  195 0214  C9          	RET
  196                   ;				;Convert LC to UC
  197 0215  FE 61       UCASE:	CP	A,'a'		;must be >= lowercase a
  198 0217  D8          	RET	C		; else go back...
  199 0218  FE 7B       	CP	A,'z'+1		;must be <= lowercase z
  200 021A  D0          	RET	NC		; else go back...
  201 021B  D6 20       	SUB	A,'a'-'A'	;subtract lowercase bias
  202 021D  C9          	RET
  203                   
  204                   ; Check if next character is a ESC
  205 021E              CHECK_ESC:
  206 021E  CD 02C1     	CALL	CI
  207 0221  FE 1B       	CP	A,ESC
  208 0223  C9          	RET			; Return Z if ESC character.
  209                   	
  210                   ; Check if next character is a CR
  211 0224              CHECK_CR:
  212 0224  CD 02C1     	CALL	CI
  213 0227  FE 0D       	CP	A,CR
  214 0229  C9          	RET			; Return Z if ESC character.
  215                   	
  216                   ; Return with 2 HEX digits in [A]. If abort, Carry flag set + ESC in [A]
  217 022A              GET_HEX:
  218 022A  C5          	PUSH	BC			
  219 022B  CD 0203     	CALL	GETCMD		;Get a character from keyboard & ECHO
  220 022E  FE 1B       	CP	A,ESC
  221 0230  28 2A       	JR	Z,HEX_ABORT
  222 0232  FE 2F       	CP	'/'		;check 0-9, A-F
  223 0234  38 26       	JR	C,HEX_ABORT
  224 0236  FE 47       	CP	'F'+1
  225 0238  30 22       	JR	NC,HEX_ABORT
  226 023A  CD 0273     	CALL	ASBIN		;Convert to binary
  227 023D  CB 27       	SLA	A
  228 023F  CB 27       	SLA	A
  229 0241  CB 27       	SLA	A
  230 0243  CB 27       	SLA	A		;Shift to high nibble	
  231 0245  47          	LD	B,A		;Store it
  232 0246  CD 0203     	CALL	GETCMD		;Get 2nd character from keyboard & ECHO
Z80ASM SuperFast Relocating Macro Assembler     	    Z80ASM 1.30 Page   5
Z80_INTSZ80

  233 0249  FE 1B       	CP	A,ESC
  234 024B  28 0F       	JR	Z,HEX_ABORT
  235 024D  FE 2F       	CP	'/'		;check 0-9, A-F
  236 024F  38 0B       	JR	C,HEX_ABORT
  237 0251  FE 47       	CP	'F'+1
  238 0253  30 07       	JR	NC,HEX_ABORT
  239 0255  CD 0273     	CALL	ASBIN		;Convert to binary
  240 0258  B0          	OR	A,B		;add in the first digit
  241 0259  B7          	OR	A,A		;To return NC
  242 025A  C1          	POP	BC
  243 025B  C9          	RET
  244                   	
  245 025C              HEX_ABORT:
  246 025C  37          	SCF			;Set Carry flag 
  247 025D  3E 1B       	LD	A,ESC
  248 025F  C1          	POP	BC
  249 0260  C9          	RET
  250                   ;
  251                   ;
  252                   ; Put 4 HEX characters in [HL] 
  253 0261              GET_HEX4:	
  254 0261  26 00       	LD      H,0000H
  255 0263  CD 022A     	CALL	GET_HEX		;get 2 HEX digits
  256 0266  38 09       	JR	C,SCAN_ABORT
  257 0268  67          	LD	H,A
  258 0269  CD 022A     	CALL	GET_HEX		;get 2 more HEX digits
  259 026C  38 03       	JR	C,SCAN_ABORT
  260 026E  6F          	LD	L,A
  261 026F  B7          	OR	A,A		;To return NC
  262 0270  C9          	RET
  263                   	
  264 0271              SCAN_ABORT:
  265 0271  37          	SCF			;Set Carry flag 
  266 0272  C9          	RET
  267                   
  268                   ; ASCII TO BINARY CONVERSION ROUTINE
  269 0273  D6 30       ASBIN:	SUB	30H 
  270 0275  FE 0A       	CP	0AH 
  271 0277  F8          	RET	M
  272 0278  D6 07       	SUB	07H 
  273 027A  C9          	RET
  274                   ;	
  275                   ;
  276                   ; PRINT [HL] ON CONSOL
  277 027B              PRINT_HL:
  278 027B  7C          	LD	A,H
  279 027C  CD 0280     	CALL	PRINT_A
  280 027F  7D          	LD	A,L
  281 0280              PRINT_A:
  282 0280  F5          	PUSH	AF
  283 0281  0F          	RRCA
  284 0282  0F          	RRCA
  285 0283  0F          	RRCA
  286 0284  0F          	RRCA
  287 0285  CD 0289     	CALL	SF598
  288 0288  F1          	POP	AF
  289 0289  CD 028F     SF598:	CALL	CONV
  290 028C  C3 02AE     	JP	CO
Z80ASM SuperFast Relocating Macro Assembler     	    Z80ASM 1.30 Page   6
Z80_INTSZ80

  291                   
  292                   ; CONVERT HEX TO ASCII
  293 028F  E6 0F       CONV:	AND	0FH
  294 0291  C6 90       	ADD	A,90H
  295 0293  27          	DAA 
  296 0294  CE 40       	ADC	A,40H
  297 0296  27          	DAA 
  298 0297  4F          	LD	C,A
  299 0298  C9          	RET
  300                   	
  301                   ; DISPLAY 8 BITS OF [A] (No registers changed)
  302                   ; DISPLAY BIT PATTERN IN [A]
  303 0299  F5          ZBITS:	PUSH	AF
  304 029A  C5          	PUSH	BC
  305 029B  D5          	PUSH	DE
  306 029C  5F          	LD	E,A		
  307 029D  06 08       	LD	B,8
  308 029F  CB 23       BQ2:	SLA	E	
  309 02A1  3E 18       	LD	A,18H
  310 02A3  8F          	ADC	A,A
  311 02A4  4F          	LD	C,A
  312 02A5  CD 02AE     	CALL	CO
  313 02A8  10 F5       	DJNZ	BQ2
  314 02AA  D1          	POP	DE
  315 02AB  C1          	POP	BC
  316 02AC  F1          	POP	AF
  317 02AD  C9          	RET
  318                   
  319                   ;<<<<<<<<<<<<<<<<<<<<<< MAIN CONSOL OUTPUT ROUTINE (ASSUMES PROPELLER BOARD) >>>>>>>>>>>>>>>>>>>>>>>>>
  320                   ;
  321 02AE  DB 00       CO:	IN	A,(CONSTAT)	; SD SYSTEMS or PROPELLER VIDIO BOARD PORT
  322 02B0  E6 04       	AND	4H
  323 02B2  CA 02AE     	JP	Z,CO
  324 02B5  79          	LD	A,C
  325 02B6  D3 01       	OUT	(CONOUT),A
  326 02B8  C9          	RET			; RETURN CHARACTER SENT IN [A]
  327                    
  328                   ;<<<<<<<<<<<<<<<<<<< MAIN CONSOL STATUS ROUTINE >>>>>>>>>>>>>>>>>>>>>>
  329                   ;
  330 02B9  DB 00       CSTS:	IN	A,(CONSTAT)
  331 02BB  E6 02       	AND	02H
  332 02BD  C8          	RET	Z
  333 02BE  AF          	XOR	A
  334 02BF  3D          	DEC	A		; RETURN WITH 0FFH IN [A] IF SOMETHING
  335 02C0  C9          	RET
  336                   
  337                   ;<<<<<<<<<<<<<<<<<<<< MAIN CONSOL INPUT ROUTINE >>>>>>>>>>>>>>>>>>>>
  338                   ;
  339 02C1  DB 00       CI:	IN 	A,(CONSTAT)	; NEED CONSTAT TO CLEAN UP SHIFT KEYS ETC
  340 02C3  E6 02       	AND	02H
  341 02C5  28 FA       	JR	Z,CI
  342 02C7  DB 01       	IN	A,(CONIN)
  343 02C9  E6 7F       	AND	7FH
  344 02CB  C9          	RET
  345                   
  346                   ;---------------------------------------------------------------------------------------
  347 02CC  0D 0A       SIGNON:		DB	CR,LF
  348 02CE  0D 0A 54 65 		DB	CR,LF,'Test Z80 Interrupts on Z80_FPGA Board.'
Z80ASM SuperFast Relocating Macro Assembler     	    Z80ASM 1.30 Page   7
Z80_INTSZ80

  349 02F6  0D 0A 42 79 		DB	CR,LF,'By John Monahan S100Computers.COM  (V1.0)  8/5/2019',0
  350                   		
  351 032C  0D 0D 0A 0A SIGNON1:	DB	CR,CR,LF,LF,'---------- Main Menu ---------------'
  352 0354  0D 0A 30 2E 		DB	CR,LF,'0.   Disable all Z80 Interrupts.'
  353 0376  0D 0A 31 2E 		DB	CR,LF,'1.   Set Z80 to IM1 Interrupts Mode.'
  354 039C  0D 0A 32 2E 		DB	CR,LF,'2.   Set Z80 to IM2 Interrupts Mode.'
  355 03C2  0D 0A 45 53 		DB	CR,LF,'ESC  To abort program.',CR,LF,0H
  356                   
  357 03DD  07 07 0D 0A MENU_MSG:	DB	BELL,BELL,CR,LF,'Menu error.',0
  358 03ED  07 07 0D 0A FORMAT_ERR_MSG: DB	BELL,BELL,CR,LF,'Data Format error.',0
  359 0404  0D 0A 43 6F CMD_DONE:	DB	CR,LF,'Command Done.',CR,LF,LF,0
  360                   
  361                   
  362 0417  30 0D 0A 41 MSG0:		DB	'0',CR,LF,'All Z80 Interrupts are disabled.',0	
  363 043B  31 0D 0A 5A MSG1:		DB	'1',CR,LF,'Z80 set to IM1 Interrupts Mode.',0
  364 045E  0D 0A 45 6E MSG1a:		DB	CR,LF,'Enter any character. You should hear the buzzer. ESC to return to menu.',CR,LF,0
  365 04AA  32 0D 0A 5A MSG2:		DB	'2',CR,LF,'Z80 set to IM2 Interrupts Mode.',0	
  366 04CD  0D 0A 45 6E MSG4:		DB	CR,LF,'Entering any keyboard character forces an Interrupt to 38H in RAM.',0
  367 0512  0D 0A 45 6E MSG5:		DB	CR,LF,'Entering any keyboard character forces an Interrupt vector location.',0 
  368 0559  30 0D 0A 5A MSG6:		DB	'0',CR,LF,'Z80 set to IM0 (8080) Interrupts Mode.',0 
  369                   
  370 0583  49 6E 74 65 INT_00H_MSG:	DB	'Interrupt vectored from 00H in RAM (I=0H)',BELL,0
  371 05AE  4D 6F 64 65 INT_20H_MSG:	DB	'Mode 2, Interrupt vectored from 20H in RAM (I=0H)',BELL,0
  372 05E1  4D 6F 64 65 INT_28H_MSG:	DB	'Mode 2, Interrupt vectored from 28H in RAM (I=0H)',BELL,0
  373 0614  4D 6F 64 65 INT_30H_MSG:	DB	'Mode 2, Interrupt vectored from 30H in RAM (I=0H)',BELL,0
  374 0647  4D 6F 64 65 INT_38H_MSG:	DB	'Mode 2, Interrupt vectored from 38H in RAM (I=0H)',BELL,0
  375                   
  376                   
  377         1000      	ORG	INT_ROUTINES		;Currently at 1000H
  378                   	
  379                   	
  380 1000              INT_ROUTINE_00H:
  381 1000  08          	EX	AF,AF'
  382 1001  D9          	EXX
  383 1002  21 0583     	LD	HL,INT_00H_MSG		; "Interrupt vectored from 20H"
  384 1005  CD 01DE     	CALL	PMSG
  385 1008  08          	EX	AF,AF'
  386 1009  D9          	EXX
  387 100A  FB          	EI
  388 100B  ED 4D       	RETI				; Mode 2 Return from interrupt
  389                   
  390                   
  391 100D              INT_ROUTINE_20H:
  392 100D  08          	EX	AF,AF'
  393 100E  D9          	EXX
  394 100F  21 05AE     	LD	HL,INT_20H_MSG		; "Mode 2 Interrupt vectored from 20H"
  395 1012  CD 01DE     	CALL	PMSG
  396 1015  08          	EX	AF,AF'
  397 1016  D9          	EXX
  398 1017  FB          	EI
  399 1018  ED 4D       	RETI				; Mode 2 Return from interrupt
  400                   
  401 101A              INT_ROUTINE_28H:
  402 101A  08          	EX	AF,AF'
  403 101B  D9          	EXX
  404 101C  21 05E1     	LD	HL,INT_28H_MSG		; Mode 2 Interrupt vectored from 38H 
  405 101F  CD 01DE     	CALL	PMSG
  406 1022  08          	EX	AF,AF'
Z80ASM SuperFast Relocating Macro Assembler     	    Z80ASM 1.30 Page   8
Z80_INTSZ80

  407 1023  D9          	EXX
  408 1024  FB          	EI
  409 1025  ED 4D       	RETI				; Return from interrupt
  410                   
  411 1027              INT_ROUTINE_30H:
  412 1027  08          	EX	AF,AF'
  413 1028  D9          	EXX
  414 1029  21 0614     	LD	HL,INT_30H_MSG		; Mode 2 Interrupt vectored from 30H
  415 102C  CD 01DE     	CALL	PMSG
  416 102F  08          	EX	AF,AF'
  417 1030  D9          	EXX
  418 1031  FB          	EI
  419 1032  ED 4D       	RETI				; Return from interrupt
  420                   
  421 1034              INT_ROUTINE_38H:
  422 1034  08          	EX	AF,AF'
  423 1035  D9          	EXX
  424 1036  21 0647     	LD	HL,INT_38H_MSG		; Mode 2 Interrupt vectored from 38H
  425 1039  CD 01DE     	CALL	PMSG
  426 103C  08          	EX	AF,AF'
  427 103D  D9          	EXX
  428 103E  FB          	EI
  429 103F  ED 4D       	RETI				; Return from interrupt
  430                   
  431                   
  432                   
  433 1041    0040      	DS	40H
  434 1081  00          STACK:	DB	0H
  435                   
  436                   
  437                   ; END
  438                   	
  439                   
  440                   
  441                   
 0 Error(s) Detected.
 3970 Absolute Bytes. 66 Symbols Detected.
