ca65 V2.13.3 - (C) Copyright 1998-2012 Ullrich von Bassewitz
Main file   : AciaTest.s
Current file: AciaTest.s

000000r 1               .debuginfo +
000000r 1               
000000r 1               .setcpu "6502"
000000r 1               .macpack longbranch
000000r 1               
000000r 1               STACK_TOP		:= $FC
000000r 1               ACIA := $A000
000000r 1               ACIAControl := ACIA+0
000000r 1               ACIAStatus := ACIA+0
000000r 1               ACIAData := ACIA+1
000000r 1               
000000r 1               .segment "IOHANDLER"
000000r 1               .org $C000
00C000  1               .segment "CODE"
00C000  1               
00C000  1               Reset:
00C000  1  A2 7F        	LDX     #$7F
00C002  1  9A           	TXS
00C003  1               ; Setup ACIA
00C003  1  A9 03        	LDA 	#$03		; Master Reset ACIA
00C005  1  8D 00 A0     	STA	ACIAControl
00C008  1  A9 15        	LDA 	#$15		; Set ACIA baud rate, word size and Rx interrupt (to control RTS)
00C00A  1  8D 00 A0     	STA	ACIAControl
00C00D  1               LOOP1:
00C00D  1  AD 00 A0     	LDA	ACIAStatus
00C010  1  29 01        	AND	#1
00C012  1  C9 01        	CMP	#1
00C014  1  F0 F7        	BEQ	LOOP1
00C016  1  AD 01 A0     	LDA	ACIAData
00C019  1  4C 0D C0         JMP	LOOP1
00C01C  1               
00C01C  1               ;.segment "VECTS"
00C01C  1               .org $FFFA
00FFFA  1  00 C0        	.word	Reset		; NMI
00FFFC  1  00 C0        	.word	Reset		; RESET
00FFFE  1  00 C0        	.word	Reset		; IRQ
00FFFE  1               
