; blink.asm
; Assembled with asm6809
; Land Boards, LLC
; Blinks an LED attached to PLD U2-17 on LB-6809-01 card

		ORG $C000
; SET LED = LOW
RESVEC	NOP
		LDA	#$55
		STA	$0000
		LDB	$0000
		CMPB	#$55
		BNE	FASTBLINK
		BRA	SLOWBLINK
;
; Slowly blink LED
;
FASTBLINK
		CLRA
		STA	$F000
; WAIT LOOP
		LDA	#$40
LOOPX1
		LDB	#$FF
LOOPX1B
		NOP
		DECB
		BNE LOOPX1B
		DECA
		BNE	LOOPX1
; SET LED = HIGH
		LDA	#$1
		STA	$F000
; WAIT LOOP
		LDA	#$FF
LOOPX2
		LDB	#$40
LOOPX2B
		NOP
		DECB
		BNE LOOPX2B
		DECA
		BNE	LOOPX2
; LOOP FOREVER
		BRA	FASTBLINK

;
; Slowly blink LED
;
SLOWBLINK
		CLRA
		STA	$F000
; WAIT LOOP
		LDA	#$FF
LOOP1
		LDB	#$FF
LOOP1B
		NOP
		DECB
		BNE LOOP1B
		DECA
		BNE	LOOP1
; SET LED = HIGH
		LDA	#$1
		STA	$F000
; WAIT LOOP
		LDA	#$FF
LOOP2
		LDB	#$FF
LOOP2B
		NOP
		DECB
		BNE LOOP2B
		DECA
		BNE	LOOP2
; LOOP FOREVER
		BRA	SLOWBLINK

; Reset vector
		ORG	$FFFE
LBFFE	FDB	RESVEC	; RESET 
