; ramTest.asm
; Assembled with asm6809
; Land Boards, LLC
; Test RAM using LB-6809-01 on LB-MEM-02 card

		ORG $C000
; SET LED = LOW
RESVEC	NOP
; TEST WITH WRTE/READ OF ADDRESS $0000 AND VALUE OF $55
		LDA	#$55
		STA	$0000
		NOP
		LDB	$0000
		CMPB #$55
		BNE	FASTBLINK
; TEST WITH WRTE/READ OF ADDRESS $0000 AND VALUE OF $AA
		LDA	#$AA
		STA	$0000
		NOP
		LDB	$0000
		CMPB #$AA
		BNE	FASTBLINK
; BOUNCE A BIT ACROSS THE DATA LINES OF ADDR $0000
		LDA #$01
LOOP1ADR
		STA $0000
		NOP
		CMPA $0000
		BNE	FASTBLINK
		ASLA
		CMPA #$00
		BNE	LOOP1ADR
		BRA	SLOWBLINK
;
; Slowly blink LED
;
FASTBLINK
		CLRA
		STA	$F000
; WAIT LOOP
		LDA	#$40
LOOPX1
		LDB	#$FF
LOOPX1B
		NOP
		DECB
		BNE LOOPX1B
		DECA
		BNE	LOOPX1
; SET LED = HIGH
		LDA	#$1
		STA	$F000
; WAIT LOOP
		LDA	#$FF
LOOPX2
		LDB	#$40
LOOPX2B
		NOP
		DECB
		BNE LOOPX2B
		DECA
		BNE	LOOPX2
; LOOP FOREVER
		BRA	FASTBLINK

;
; Slowly blink LED
;
SLOWBLINK
		CLRA
		STA	$F000
; WAIT LOOP
		LDA	#$FF
LOOP1
		LDB	#$FF
LOOP1B
		NOP
		DECB
		BNE LOOP1B
		DECA
		BNE	LOOP1
; SET LED = HIGH
		LDA	#$1
		STA	$F000
; WAIT LOOP
		LDA	#$FF
LOOP2
		LDB	#$FF
LOOP2B
		NOP
		DECB
		BNE LOOP2B
		DECA
		BNE	LOOP2
; LOOP FOREVER
		BRA	SLOWBLINK

; Reset vector
		ORG	$FFFE
LBFFE	FDB	RESVEC	; RESET 
